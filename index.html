<!DOCTYPE html>
<html>
	<head>
		<title>code-input.js - Edit *and* highlight (and more)!</title>
		<link rel="shortcut icon" href="/assets/logo.svg"/>
		
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta charset="utf-8"/>

		<link rel="stylesheet" href="/assets/style.css"/>
		
		<!--Import highlight.js-->
		<!--For a downloaded version of highlight.js, replace the file paths for both CSS and.jss below with the relative file paths from this HTML file.-->
		<!--This is similar to the "self hosted" example below.-->
		<!--Guide: https://highlightjs.org/#usage#:~:text=As%20HTML%20Tags-->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/a11y-light.min.css" media="(prefers-color-scheme: light)">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/a11y-dark.min.css" media="(prefers-color-scheme: dark)">
		<!--You can also choose custom themes by changing "default" above to the theme name from https://highlightjs.org/demo-->
		<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
		    
		<!--Import highlight.js languages-->
		<!--You can copy this line to import additional languages, replacing "javascript" with a language name from https://highlightjs.org/demo.-->
		<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/javascript.min.js"></script>
		    
		<!--Import code-input-->
		<!--The same goes for downloaded versions.-->
		<script src="/lib/code-input/code-input.min.js"></script>
		<link rel="stylesheet" href="/lib/code-input/code-input.min.css">
		    
		<!--Import some code-input plugins-->
		<!--The same goes for downloaded versions.-->
		<!--Plugin files are here: https://github.com/WebCoder49/code-input/tree/main/plugins.-->
		<script src="/lib/code-input/plugins/indent.min.js"></script>
	</head>
	<body>
		<nav>
			<details>
				<summary>Navigation Menu</summary>
				<ul>
					<li><a href="#TODO"/>Documentation</a></li>
					<li><a href="#TODO"/>Tests</a></li>
					<li><a href="https://github.com/WebCoder49/code-input"/>GitHub</a></li>
					<li><a href="https://codeberg.org/code-input-js/code-input"/>Codeberg</a></li>
					<li><a href="https://yarnpkg.com/package?name=@webcoder49/code-input"/>Yarn</a></li>
					<li><a href="https://npmjs.com/package/@webcoder49/code-input"/>NPM</a></li>
				</ul>
			</details>
			<a href="/"><img src="/assets/wordmark.svg" alt="code-input.js wordmark; go to homepage" id="wordmark"/><img src="/assets/logo.svg" alt="code-input.js logo; go to homepage" id="logo"/></a>
		</nav>
		<script>
			function openNavigationIfNeeded() {
				if(document.body.clientWidth > 1500) {
					document.querySelector("nav details").setAttribute("open", true);
					document.querySelector("nav details summary").style.display = "none";
				} else {
					document.querySelector("nav details").removeAttribute("open");
					document.querySelector("nav details summary").style.display = "block";
				}
			}
			openNavigationIfNeeded();
			window.addEventListener("resize", openNavigationIfNeeded);
		</script>
		<main>
			<h1>An <mark>editable</mark> <code>&lt;textarea&gt;</code> that supports <em>any</em> <mark>syntax highlighting</mark> algorithm, for code or something else. <a href="#TODO">Also, added plugins.</a></h1>
			<p>Aiming to be <a href="#features">more <mark>flexible</mark>, <mark>lightweight</mark>, <mark>modular</mark>, <mark>progressively enhanced</mark> and <mark>standards-based</mark> than the alternatives</a>, we support HTML forms, the <code>&lt;textarea&gt;</code> JavaScript interface, more languages and more use cases.</p>	
			
			<h2 id="demo">Get Started with a Demo</h2>
			<!--Start demos-->
			<form id="demo-presets-form" style="display: none;"></form>
			<div id="demo-presets-fallback">
				<noscript><p>You've got JavaScript disabled. You'll see the code-input element's no-JavaScript fallback.</p></noscript>
				<h3>Demos</h3>
				<h4>Basic Highlight.js Code Editor</h4>
				<pre id="demo-preset-basic">&lt;!--basic: TODO--></pre>

				<h3>Tutorials by Example</h4>
				<h4>Prism.js Code Editor (use <strong>with vanilla HTML here</strong> or <a href="#TODO">with ECMAScript Modules/Vue/Nuxt</a>)</h4>
				<pre id="demo-preset-prism">&lt;!--prism: TODO--></pre>
				<h4>highlight.js Code Editor (use <strong>with vanilla HTML here</strong> or <a href="#TODO">with ECMAScript Modules/Vue/Nuxt</a>)</h4>
				<pre id="demo-preset-hljs">&lt;!--hljs: TODO--></pre>
				<h4>Editor with Custom Highlighting Algorithm (use <strong>with vanilla HTML here</strong> or <a href="#TODO">with ECMAScript Modules/Vue/Nuxt</a>)</h4>
				<pre id="demo-preset-custom">&lt;!--custom: TODO--></pre>
			</div>
			<code-input id="demo-in" template="demo-in" language="HTML" oninput="updateDemo();"><textarea code-input-fallback></textarea></code-input>
			<iframe id="demo-out" style="resize: both; display: none;" href="data:text/html,Edit above to see here."></iframe>	
			<script>
				// Fill #demo-presets-form
				const demoPresetsElements = document.querySelectorAll("#demo-presets-fallback h3, #demo-presets-fallback h4, #demo-presets-fallback pre");
				let lastFieldset = null;
				let nextInputHTML = "";
				for(let i = 0; i < demoPresetsElements.length; i++) {
					const tagName = demoPresetsElements[i].tagName.toLowerCase();
					if(tagName == "h3") {
						// Start new fieldset
						if(lastFieldset != null) document.getElementById("demo-presets-form").append(lastFieldset);
						lastFieldset = document.createElement("fieldset");
						const legend = document.createElement("legend");
						legend.innerHTML = demoPresetsElements[i].innerHTML;
						lastFieldset.append(legend);
					} else if(tagName == "h4") {
						// Name new input
						nextInputHTML = demoPresetsElements[i].innerHTML;
					} else if(tagName == "pre") {
						if(nextInputHTML == "") throw new Error("Editor preset fallback has a pre element before its h4 title");
						if(lastFieldset == null) throw new Error("Editor preset fallback has a pre element before its category's h3 title");
						if(demoPresetsElements[i].id.substring(0, 12) != "demo-preset-") throw new Error("Editor preset fallback has a pre element with a non demo-preset-name id ('"+demoPresetsElements[i].id+"')");
						// Add new input
						const label = document.createElement("label");
						const input = document.createElement("input");
						input.type = "radio";
						input.name = "preset";
						input.value = demoPresetsElements[i].id.substring(12); // Remove demo-preset-
						label.append(input);
						label.innerHTML += nextInputHTML;
						lastFieldset.append(label);
						const br = document.createElement("br");
						lastFieldset.append(br);
					}
				}
				if(lastFieldset != null) document.getElementById("demo-presets-form").append(lastFieldset);

				document.getElementById("demo-out").style.display = "block";
				document.getElementById("demo-presets-form").style.display = "block";
				document.getElementById("demo-presets-fallback").style.display = "none";
				// #demo-preset- will fill that demo
				function checkHash() {
					if(window.location.hash.substring(0, 13) == "#demo-preset-") {
						let preset = document.location.hash.substring(13);
						document.querySelector("#demo-presets-form input[value="+preset+"]").click(); // Preset alphanumeric so no need to escape
						document.querySelector("#demo").scrollIntoView();
					}
				}
				checkHash();
				window.addEventListener("load", function() {
					const anchorElems = document.querySelectorAll("a");
					for(let i = 0; i < anchorElems.length; i++) {
						anchorElems[i].addEventListener("click", function() {
							window.location.href = this.href; // Follow link
							checkHash(); // If still here check hash
							return false; // Prevent normal link behaviour
						});
					}
				});	

				codeInput.registerTemplate("demo-in", new codeInput.templates.Hljs(hljs));
				function updateDemo() {
					document.getElementById('demo-out').src = URL.createObjectURL(new Blob([document.getElementById('demo-in').value], {type: "text/html"}));
				}
				function loadDemo(name) {
					document.getElementById('demo-in').value = document.getElementById("demo-preset-"+name).textContent; // From demos.js
					updateDemo();
				}
				window.addEventListener("load", function() {
					loadDemo(new FormData(document.getElementById("demo-presets-form")).get("preset"));
					document.getElementById("demo-presets-form").addEventListener("change", function() {
						loadDemo(new FormData(document.getElementById("demo-presets-form")).get("preset"));
					});
				});
			</script>
			<style>
				#demo-in, #demo-out {
					width: calc(100% - 20px);
					margin: 0;
					font-size: inherit;
					border: 10px solid #888;
				}
				#demo-in {
					border-bottom: 1px dashed #888;
				}
				#demo-out {
					border-top: 1px dashed #888;
				}
				#demo-in, #demo-out {
					height: min(400px, calc(50vh - 65px));
					resize: vertical;
				}
				#demo-out {
					 background-color: white;
				}
			</style>
			<!--End demos-->

			<!--<p>By using <code>code-input.js</code> and any syntax-highlighting library of your choosing, you can create editable, syntax-highlightable, customisable elements that look like <code>&lt;textarea&gt;</code>s to HTML forms and JavaScript code, look like normal non-editable <code>&lt;pre&gt;&lt;code&gt;</code> blocks to the syntax-highlighting library, and have a convenient plugin API plus existing plugins for commonly-wanted functionality.</p>-->
			<h2 id="features">Features</h2>
			<dl>
				<dt>Choose Any Highlighter</dt><dd>Use the built in templates for <a href="#demo-preset-prism">Prism.js</a> or <a href="#demo-preset-hljs">highlight.js</a>, or <a href="#demo-preset-custom">pass in any function to highlight a normal HTML element to our template class</a>, and <code>code-input.js</code> will do the editability for you. What will you create?</dd>
				<dt>Extensible With Plugins</dt><dd>Want coding features like easy indentation and closing of brackets, tools like find and replace and go to line, or better integration like custom autocomplete popups and processing of selected highlighted tokens? <a href="#TODO">Try a selection of the easy-to-use plugins.</a> Plugin not available? <a href="#TODO">Make one yourself as a JavaScript class!</a></dd>
				<dt>HTML Form and JavaScript <code>textarea</code> Interface Support</dt><dd>A <code>code-input</code> element's just a textarea with fancy bits added - get good support with few overheads!</dd>
				<dt>Lightweight</dt><dd>The use of modular plugins, and native features like the <code>textarea</code> wherever possible, makes code-input more lightweight than most web-based code editors while having many of their features, plus more customisability and form support. We have plans to make it even more so!</dd>
				<dt>Widely Usable and Progressively Enhanced</dt><dd>Works on any modern browser independent of whether a framework is used, with the standardised web component API. Integrates well into modular setups and web frameworks with TypeScript definitions, an ECMAScript Module build and tutorials. Falls back to a <code>textarea</code> element when there is insufficient JavaScript support. Even works on Lynx.</dd>
			</dl>
			<h2 id="alternatives">Alternatives</h2>
			<p>Here at <code>code-input.js</code>, we love getting the library to work in different setups, or receiving bug reports; flexibility is in its nature! Nevertheless, if <code>code-input.js</code> doesn't suit you on a more fundamental level, and you want a fully-featured, packaged but likely heavier code editing component, and don't need compatibility with different highlighters, HTML forms or textarea APIs, we recommend something like <a href="https://codemirror.net/">CodeMirror</a>, <a href="https://ace.c9.io/">Ace</a> or <a href="https://microsoft.github.io/monaco-editor/">Monaco</a>.</p>
		</main>
	</body>
	<footer>Content licensed <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a>, copyright its authors identified at the top of the page, code snippets presented in tutorials dedicated to the public domain under <a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0-1.0</a> and website code licensed <a href="https://spdx.org/licenses/MIT">MIT/Expat</a>, copyright Oliver Geer and contributors. This is similar to Mozilla Developer Network's license.</footer>
</html>
